<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Data Lab 3 - Descriptive Comparisons: Medicaid and Health – HPAM 7660 - Health Policy Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../img/site_icon.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-a3210a1056c353f8c335b29fa7e057a4.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">HPAM 7660 - Health Policy Analysis</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../syllabus.html"> 
<span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../schedule.html"> 
<span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../resources/index.html"> 
<span class="menu-text">Resources</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#step-1-create-a-new-r-project-r-script-file" id="toc-step-1-create-a-new-r-project-r-script-file" class="nav-link active" data-scroll-target="#step-1-create-a-new-r-project-r-script-file">Step 1: Create a New R Project &amp; R Script File</a></li>
  <li><a href="#step-2-downloading-brfss-data-for-2023" id="toc-step-2-downloading-brfss-data-for-2023" class="nav-link" data-scroll-target="#step-2-downloading-brfss-data-for-2023">Step 2: Downloading BRFSS Data for 2023</a></li>
  <li><a href="#step-3-importing-the-data-into-r" id="toc-step-3-importing-the-data-into-r" class="nav-link" data-scroll-target="#step-3-importing-the-data-into-r">Step 3: Importing the Data into R</a></li>
  <li><a href="#step-4-subsetting-the-data" id="toc-step-4-subsetting-the-data" class="nav-link" data-scroll-target="#step-4-subsetting-the-data">Step 4: Subsetting the Data</a></li>
  <li><a href="#step-5-cleaning-the-data" id="toc-step-5-cleaning-the-data" class="nav-link" data-scroll-target="#step-5-cleaning-the-data">Step 5: Cleaning the Data</a></li>
  <li><a href="#step-6-comparing-self-reported-health-between-those-with-medicaid-coverage-and-the-uninsured" id="toc-step-6-comparing-self-reported-health-between-those-with-medicaid-coverage-and-the-uninsured" class="nav-link" data-scroll-target="#step-6-comparing-self-reported-health-between-those-with-medicaid-coverage-and-the-uninsured">Step 6: Comparing Self-Reported Health between those with Medicaid Coverage and the Uninsured</a></li>
  <li><a href="#summary-and-key-takeaways" id="toc-summary-and-key-takeaways" class="nav-link" data-scroll-target="#summary-and-key-takeaways">Summary and Key Takeaways</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Lab 3 - Descriptive Comparisons: Medicaid and Health</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>In this tutorial, we’ll analyze the 2023 Behavioral Risk Factor Surveillance System (BRFSS) data to explore Medicaid coverage and its relationship with self-reported health. By summarizing Medicaid coverage and comparing health outcomes across Medicaid recipients and the uninsured, we’ll lay the foundation for more advanced analysis in future tutorials.</p>
<section id="step-1-create-a-new-r-project-r-script-file" class="level2">
<h2 class="anchored" data-anchor-id="step-1-create-a-new-r-project-r-script-file">Step 1: Create a New R Project &amp; R Script File</h2>
<p>See the instructions from <a href="../../materials/Data Labs/datalab_2.html">Data Lab 2</a> to create a new R Project and R Script File. You can call this new project/folder “BRFSS Medicaid Health” or whatever you’d like to call it (as long as you remember the name!). You should type all of the code for this Data Lab in your R Script file and save that file when you’re finished. That way, if you need to use that code again (and you will), you’ll have it saved and won’t have to retype everything.</p>
</section>
<section id="step-2-downloading-brfss-data-for-2023" class="level2">
<h2 class="anchored" data-anchor-id="step-2-downloading-brfss-data-for-2023">Step 2: Downloading BRFSS Data for 2023</h2>
<p>Start by downloading the 2023 BRFSS data from the <a href="https://www.cdc.gov/brfss/annual_data/annual_data.htm">CDC BRFSS Annual Survey Data page</a>. Follow these steps:</p>
<ol type="1">
<li><p>Navigate to the 2016-2023 Annual Survey Data Section and click on the link that says “2023 Annual Survey Data”.</p></li>
<li><p>Download the codebook by clicking on “2023 BRFSS Codebook” link. We’ll reference this later when we’re looking at values for specific variables in the data. (To align with the priorities of the new Trump administration, the CDC has removed some files from their website. Last I checked, the 2023 BRFSS data file was still available, but the codebook was not. If you are still seeing a dead link when clicking on the codebook, you can download it <a href="../../materials/Data Labs/LLCP_2023_Codebook.pdf">here</a>.)</p></li>
<li><p>Scroll down the page to the “Data Files” section and download the file called “2023 BRFSS Data (SAS Transport Format with the .xpt extension). Save the file to your project folder. This will download as a zip file, so you’ll need to unzip the file once you’ve downloaded it. This is a pretty large file when unzipped (1.22GB), so keep that in mind when downloading.</p></li>
</ol>
</section>
<section id="step-3-importing-the-data-into-r" class="level2">
<h2 class="anchored" data-anchor-id="step-3-importing-the-data-into-r">Step 3: Importing the Data into R</h2>
<p>Now that you’ve saved the .xpt file, let’s load it into R using the <code>read_xpt</code> command from the <code>haven</code> package. You’ll probably need to install this package before loading the library. Be patient as you load this file, it’s a large data set and will take a few minutes to load. Once it’s loaded, you should see the data frame in your Global Environment window.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"haven"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>brfss_data <span class="ot">&lt;-</span> <span class="fu">read_xpt</span>(<span class="st">"path_to_file/LLCP2023.XPT"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note that you’ll need to replace “path_to_file” in the code chunk above with the actual path to the .xpt file that you saved on your computer.</p>
<p><em>Special note for Windows users</em>: Windows uses backslashes (\) instead of forward slashes (/) for file paths, but R doesn’t like backslashes. If you’re a Windows user, you can try and replace the backslashes with forward slashes. In some cases that will work, but if it doesn’t, you can use two backslashes instead of one to appease R. So, for example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>brfss_data <span class="ot">&lt;-</span> <span class="fu">read_xpt</span>(<span class="st">"C:</span><span class="sc">\\</span><span class="st">Users</span><span class="sc">\\</span><span class="st">kevin</span><span class="sc">\\</span><span class="st">data</span><span class="sc">\\</span><span class="st">LLCP2023.XPT"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="step-4-subsetting-the-data" class="level2">
<h2 class="anchored" data-anchor-id="step-4-subsetting-the-data">Step 4: Subsetting the Data</h2>
<p>Take a look at the BRFSS data tibble by typing “brfss_data” into the Console command line. You’ll see that this dataset contains 433,323 rows (these are individual-level observations) and 350 columns (each column is a separate variable).</p>
<p>Now, we won’t need all 350 variables for our work in this Data Lab, so let’s select only the variables we’ll actually need. This will reduce the size of the dataset we’re working with and allow things to run faster.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>brfss_smaller <span class="ot">&lt;-</span> <span class="fu">select</span>(brfss_data, PRIMINS1, GENHLTH, <span class="st">`</span><span class="at">_AGE80</span><span class="st">`</span>, SEXVAR, INCOME3, EDUCA)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This tells R that we want to create a dataset called “brfss_smaller” that includes ONLY the columns (variables) PRIMINS1, GENHLTH, _AGE80, SEXVAR, INCOME3, and EDUCA. You’ll see that the variable _AGE80 is enclosed in backticks “`”. This is because that column name starts with an underscore and R doesn’t like that.</p>
</section>
<section id="step-5-cleaning-the-data" class="level2">
<h2 class="anchored" data-anchor-id="step-5-cleaning-the-data">Step 5: Cleaning the Data</h2>
<p>Let’s go through the codebook and take a look at the values for each of these variables. Starting with the “PRIMINS1” variable, you’ll see that this is where we can identify a respondent’s primary source of health insurance coverage. After locating this variable in the codebook, let’s take a look at the values of the “PRIMINS1” variable in the data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(brfss_smaller<span class="sc">$</span>PRIMINS1, <span class="at">useNA =</span> <span class="st">"ifany"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You should see that, like the codebook indicates, the values of the “PRIMINS1” variable in the data range from 1 to 10, include values of 77, 88, and 99, and that there are 5 missing values for this variable in the data. For our purposes today, we’ll focus on those with Medicaid coverage and those who are uninsured. A value of 5 in the PRIMINS1 column indicates that the respondent has Medicaid coverage and there appear to be 28,729 individuals in the data with Medicaid. A value of 88 indicates that the respondent has no insurance coverage of any type and there appear to be 22,703 individuals in the data who are uninsured.</p>
<p>Next, let’s take a look at the values of the “GENHLTH” variable. This variable is a measure of self-reported health where people rank their health on a scale ranging from “excellent” to “poor”. Also notice that there are some individuals who didn’t know how they’d rate their health (value = 7), some that refused to answer the question (value = 9), and a few who were not asked the question or having missing responses (value = BLANK or NA in R terms). We’ll want to get rid of these people before doing any comparisons of health status.</p>
<p>Next is “_AGE80”. This is simply a respondent’s age in years with all ages above 80 top coded at 80. This won’t matter much for us, but note that if you wanted to examine outcomes for specific ages above 80, you wouldn’t be able to do it in this data. As far as we’re concerned, when cleaning the data, we’ll want to drop those who are 65 and older because they will likely have Medicare (possibly in addition to Medicaid).</p>
<p>Next we have “SEXVAR”, which is an indicator of sex. You can see that this variable is coded as either a 1 or a 2 depending on a respondent’s sex. It can be tricky to remember which value corresponds to female and which to male, so we’ll create a new variable called “FEMALE” based on “SEXVAR” that will equal 1 if the respondent is female and will equal 0 if they are male. That’s much easier to remember.</p>
<p>Next is “INCOME3”. This reports annual household income in various groupings. Again, there are some people who respond that they don’t know their annual household income (value = 77), some people who refuse to respond to this question (value = 88), and some people for whom a response was not recorded (value = BLANK or NA).</p>
<p>Finally, we have “EDUCA”, which records the highest grade of school that a respondent completed. Here again we have some people who refused to respond (value = 9) and some with missing responses (value = BLANK or NA).</p>
<p>To clean the data, we’ll do the following:</p>
<ol type="1">
<li><p>Keep only those with Medicaid insurance coverage or those who are uninsured (you’ll see why shortly).</p></li>
<li><p>Keep only those who are under the age of 65.</p></li>
<li><p>Create a new variable called “FEMALE” based on “SEXVAR” that will equal 1 if the respondent is female and will equal 0 if they are male.</p></li>
<li><p>Drop any observations (i.e., rows) where a respondent has BLANK values for any of the variables in the data.</p></li>
</ol>
<p>The following code will generate this clean dataset (don’t forget the backticks around the _AGE80 variable):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>brfss_clean <span class="ot">&lt;-</span> brfss_smaller <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(PRIMINS1 <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">88</span>),</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">_AGE80</span><span class="st">`</span> <span class="sc">&lt;</span> <span class="dv">65</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">FEMALE =</span> <span class="fu">ifelse</span>(SEXVAR <span class="sc">==</span> <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">0</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here we’re creating a new dataset called <code>brfss_clean</code> that:</p>
<ol type="1">
<li><p>Starts with our <code>brfss_smaller</code> dataset: <code>brfss_clean &lt;- brfss_smaller</code></p></li>
<li><p>Keeps only those with Medicaid coverage or the uninsured and only those who are under age 65: <code>filter(PRIMINS1 %in% c(5, 88), _AGE80 &lt;65)</code> where the <code>c()</code> function creates a vector or list of values.</p></li>
<li><p>Creates the new variable FEMALE: <code>mutate(FEMALE = ifelse(SEXVAR == 2, 1, 0))</code> where this reads as “create a variable called FEMALE that equals 1 when SEXVAR is equal to 2 and equals 0 otherwise.”</p></li>
<li><p>Drops any rows (i.e., observations) that have missing values for any of the variables: <code>na.omit()</code></p></li>
</ol>
<p>One other thing to note about this code is that it uses the R pipe operator (%&gt;%). This allows us to combine multiple commands in R. It’s not all that important that you understand how the pipe operator works in this Data Lab becuase you’ll be introduced to it again in an upcoming Problem Set.</p>
<p>Let’s make sure this new dataset <code>brfss_clean</code> looks the way it ought to. First, lets take a look at the values of the “PRIMINS1” variable and make sure they look the way they’re supposed to.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(brfss_clean<span class="sc">$</span>PRIMINS1, <span class="at">useNA =</span> <span class="st">"ifany"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You should only see two values 5 and 88 when you run this command. There should be 24,401 respondents with a PRIMINS1 value of 5 and 21,014 respondents with a PRIMINS1 value of 88.</p>
<p>Next, let’s check our age range.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(brfss_clean<span class="sc">$</span><span class="st">`</span><span class="at">_AGE80</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here we’re using the <code>summary</code> command instead of the <code>table</code> command because <code>summary</code> provides a quick way to gauge a range of values. You can see that the minimum value for the “_AGE80” variable is 18 and the maximum value is 64, so all good there.</p>
<p>Next, let’s check the values of the “FEMALE” variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(brfss_clean<span class="sc">$</span>FEMALE)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You should see that the data include 24,944 respondents whose sex is female and 20,471 whose sex is male.</p>
<p>So it looks like the data are cleaned properly. Let’s move on to generating some descriptive comparisons of the relationship between Medicaid coverage and health.</p>
</section>
<section id="step-6-comparing-self-reported-health-between-those-with-medicaid-coverage-and-the-uninsured" class="level2">
<h2 class="anchored" data-anchor-id="step-6-comparing-self-reported-health-between-those-with-medicaid-coverage-and-the-uninsured">Step 6: Comparing Self-Reported Health between those with Medicaid Coverage and the Uninsured</h2>
<p>Let’s start to get a sense of the unadjusted relationship between Medicaid coverage and health by comparing self-reported health status for those with Medicaid and those who are uninsured.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(brfss_clean<span class="sc">$</span>GENHLTH, brfss_clean<span class="sc">$</span>PRIMINS1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Remember that a value of 5 for “PRIMINS1” indicates that the respondent has Medicaid coverage and a value of 88 indicates they are uninsured. It’s also helpful to remember that self-reported health is ranked on a descending scale from 1 (excellent) to 5 (poor).</p>
<p>This table command shows us the counts of respondents in each category of self-reported health by insurance status. This actually isn’t all that helpful because it’s hard to make comparisons when we’re just looking at counts. Let’s convert these numbers to proportions instead.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(<span class="fu">table</span>(brfss_clean<span class="sc">$</span>GENHLTH, brfss_clean<span class="sc">$</span>PRIMINS1), <span class="at">margin =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This looks a little messy. Let’s clean it up by converting these from proportions to percentages and only keeping two decimal points.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">prop.table</span>(<span class="fu">table</span>(brfss_clean<span class="sc">$</span>GENHLTH, brfss_clean<span class="sc">$</span>PRIMINS1), <span class="at">margin =</span> <span class="dv">2</span>) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This is much better. Here we can see that 11.18% of Medicaid respondents report their health as excellent compared to 15.78% of the uninsured. Similarly, 9.81% of Medicaid respondents report their health as poor compared to only 4.69% of the uninsured. Hmmm. This seems a little strange. It appears that the uninsured may actually be in better health (at least according to this measure of self-reported health than those with Medicaid coverage).</p>
<p>Let’s try another comparison. Suppose that our self-reported health scale is ordinal in the sense that moving from 1 to 2 reflects the same change in health status as moving from 2 to 3 and 3 to 4 and so on. In that case, we could calculate the mean score of “GENHLTH” and compare those means across our two groups. We can do that as follows:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>brfss_clean <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(PRIMINS1) <span class="sc">%&gt;%</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_health=</span><span class="fu">mean</span>(GENHLTH, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here we’re using the <code>group_by</code> command along with the <code>summarize</code> command to calculate the means of “GENHLTH” by insurance coverage. We’re also adding the <code>na.rm=TRUE</code> option which will drop any missing values before calculating the means. This shouldn’t matter in our case because we’ve already dropped missing values from the dataset, but it’s good practice to get in the habit of using it anyway.</p>
<p>Ok, after running this code, you should see that the mean value of “GENHLTH” for those with Medicaid coverage is 3.02 and the mean value for those who are uninsured is 2.76. Since a higher score represents worse self-reported health, we’re still seeing that the uninsured tend to be healthier than those with Medicaid coverage!</p>
<p>But wait! We forgot that the variable “GENHLTH” contains values of 7 for people who don’t know their health status and 9 for people who refused to answer the question. We don’t want these values to count towards the means we’re calculating. Let’s fix that.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>brfss_clean <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(PRIMINS1) <span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_health =</span> <span class="fu">mean</span>(GENHLTH[<span class="sc">!</span>GENHLTH <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">9</span>)], <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here we’ve added the condition that “GENHLTH” values of 7 and 9 should not be counted when we’re calculating the mean of “GENHLTH” for each group. As you can see, this makes little difference to our mean values, but it’s important for accuracy.</p>
</section>
<section id="summary-and-key-takeaways" class="level2">
<h2 class="anchored" data-anchor-id="summary-and-key-takeaways">Summary and Key Takeaways</h2>
<p>In this Data Lab, we downloaded data from the 2023 BRFSS Survey and compared differences in self-reported health for those who had insurance coverage through the Medicaid program and those who were uninsured. We found that people who were covered by Medicaid tended to be in worse health than those with no insurance coverage at all.</p>
<p>While we might be tempted to draw conclusions about the value of Medicaid coverage from this analysis, we should be very hesitant to do so. As we’ll see in the upcoming class discussions and our future data work, there are likely to be very good explanations for this finding that don’t involve Medicaid coverage worsening health.</p>
<p>In our next Data Lab, we’ll work on creating additional descriptive statistics and refining our anlaytical dataset for future analyses. Once we’ve done that, we can start improving the rigor of the methods we’re using to compare the health of those with Medicaid coverage and those who are uninsured.</p>
<p>Be sure to save your R Script file before exiting RStudio!</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/hpam7660\.com");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>