{
  "hash": "84567b0a99254984458a8d3d2cdd430e",
  "result": {
    "markdown": "---\ntitle: \"Regression Tutorial - Parish Cancer Rates Controlling for Educational Attainment\"\nsummary: >-\n  Use regression analysis to estimate cancer rates across Louisiana parishes controlling for differences in educational attainment.\n---\n\n\n## Re-run Code to Include Educational Attainment\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load libraries\nlibrary(tidyverse)\nlibrary(maps)\n\n# Read in the data frames we already created\nload(\"~/Dropbox/Documents/Teaching Materials/Health Policy/GitHub Site/hpam7660-sp24//assignments/tutorial_8.RData\")\n\nparish_rates <- parish_rates %>%\n  filter(black == 0) %>%\n  subset(, select = c(\"cntyrsd\", \"cancer_parish\", \"year\", \"total_rate_adj\", \"total_weight\", \"population\"))\n\nla_smoke <- \n  read_csv(\"https://www.dropbox.com/scl/fi/fh5gokmw3so6xfc5rthbl/la_smoke.csv?rlkey=f0vy11mvqcd37htsz8ubovtb8&dl=1\")\n\nla_smoke_rates <- parish_rates %>%\n  inner_join(la_smoke, by = c(\"cntyrsd\" = \"fips\", \"year\"))\n\nmodel <- lm(total_rate_adj ~ smoke_perct + as.factor(year) + as.factor(cntyrsd), data = la_smoke_rates)\nla_smoke_rates$total_rate_hat <- predict(model, newdata = la_smoke_rates)\n\nla_smoke_rates$smoke_weight <- (la_smoke_rates$total_rate_hat) * (la_smoke_rates$population)\n\nsmoke_rates_map <- la_smoke_rates %>%\n  group_by(cntyrsd, year) %>%\n  summarize(\n    total_rate_adj_wt = sum((total_weight) / sum(population), na.rm = TRUE),\n    smoke_rate_adj_wt = sum((smoke_weight) / sum(population), na.rm = TRUE)\n  )\n\nsmoke_rates_map <- smoke_rates_map %>%\n  filter(year == 2019)\n\nla_map_smoke <- map_data(\"county\", region = \"louisiana\")\n\nfips_map <- county.fips %>%\n  filter(fips>=22000 & fips<23000) %>%\n  mutate(fips = fips - 22000) %>%\n  separate(polyname, into = c(\"region\", \"subregion\"), sep = \",\", remove = TRUE) %>%\n  distinct(fips, .keep_all = TRUE) %>%\n  mutate(subregion = ifelse(subregion == \"st martin:north\", \"st martin\", subregion))\n\nsmoke_map_join = la_map_smoke %>%\n  inner_join(fips_map, by = c(\"region\", \"subregion\"))\n\nsmoke_map_final = smoke_rates_map %>%\n  inner_join(map_join, by = c(\"cntyrsd\" = \"fips\"))\n\nggplot(data = smoke_map_final, mapping = aes(x = long, y = lat, group = group, fill = total_rate_adj_wt)) +\n  geom_polygon(color = \"limegreen\", size = 0.1) +\n  scale_fill_gradient(low = \"lightblue\", high = \"darkblue\") +\n  coord_map('mercator') +\n  theme_bw()\n\nggplot(data = smoke_map_final, mapping = aes(x = long, y = lat, group = group, fill = smoke_rate_adj_wt)) +\n  geom_polygon(color = \"limegreen\", size = 0.1) +\n  scale_fill_gradient(low = \"lightblue\", high = \"darkblue\") +\n  coord_map('mercator') +\n  theme_bw()\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}